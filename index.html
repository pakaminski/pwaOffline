<!-- Template of this presentation was inspired by "The quest for insights, the true objective of big data" by John Alexis Guerra Gómez http://infovis.co/bigDataQuest/  --><!DOCTYPE html><html><head><title>Offline capabilities of PWAs</title><meta charset="utf-8"><meta name="author" content="Pawel Kaminski"><meta name="description" content="Presentation for Capgemini Apps DE Architects &amp; Engineers Summit 2017"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"><link href="style.css" rel="stylesheet"><script>var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? 'lib/css/print/pdf.css' : 'lib/css/print/paper.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );

</script></head><body><div class="reveal"><div class="slides">       <section id="title"><h1>Offline capabilities of PWAs</h1><p><h2>Paweł Kamiński                 </h2></p><p><strong>Apps DE Architects &amp; Engineers Summit 2017</strong></p><p>Frankfurt 23 March 2017</p></section><section id="agenda"><h2>Agenda</h2><ol><li class="fragment">Quick introduction to PWA</li><li class="fragment">To cache or not to cache ?</li><li class="fragment">Not only cookies</li><li class="fragment">Demo</li><li class="fragment">Q &amp;A</li></ol></section><section><section id="pwa01"><h2>Current State of Mobile Web</h2><ul><li class="fragment">Responsive Web Design  <img src="img/2012.jpg"></li><li class="fragment">Mobile first</li><li class="fragment">Hamburger menu icon <img src="img/hamicon.png"></li></ul></section><section id="pwa02"><h2>in 2017 it's not enough...</h2><table> <tr><td class="fragment"><h4>We want to web apps that </h4><ul><li>always work despite of conectivity<br>status</li><li>reduce loading time</li><li>are proactive        </li></ul></td><td class="fragment"><h4>in marketing jargon</h4><ul>           <li>Reliable                                          </li><li>Fast </li><li>Engaging </li></ul></td></tr></table></section><section id="pwa03"><h2>Progressive Web Apps</h2><ul class="fragment"><li>is a new way to deliver amazing user experiences on the web. <span class="small"><a href="https://developers.google.com/web/progressive-web-apps/?hl=en"> Google    </a></span></li><li>is term used to denote a new software development methodology. Unlike traditional applications, progressive web apps are a hybrid of regular web pages (or websites) and a mobile application (...).<span class="small"><a href="https://en.wikipedia.org/wiki/Progressive_web_app">Wikipedia    </a></span></li><li> are like good old web sites but better. In a modern browser they exhibit super–powers<span class="small"><a href="https://developer.mozilla.org/en-US/Apps/Progressive">Mozilla    </a></span></li></ul></section><section id="pwa04"><h2>Why should we care           </h2><p class="fragment">Nine talks during Google I/0 2016         </p><div class="fragment">       <img src="img/usage.jpg"><p class="quote">picture taken from  <a href="https://youtu.be/U52dD0tegsA?t=282">Building Progressive Web Apps Today (Chrome Dev Summit 2016) Video       </a></p></div></section><section id="pwa05"><h2>Service Worker</h2><div class="fragment"><p class="just">A service worker is a script that your browser runs in the background, separate from a web page, opening the door to features that don't need a web page or user interaction. 
Today, they already include features like <strong> </strong>push notifications 
and <strong> </strong>background sync. 
In the future service workers will support other things like periodic sync or geofencing.</p><span class="small"><a href="https://developers.google.com/web/fundamentals/getting-started/primers/service-workers"> Developers Google     </a></span></div></section><section id="pwa06"><img src="img/CanIUse.jpg"><p class="quote"><a href="http://caniuse.com/#search=service%20Worker"> Can I use</a></p></section><section id="pwa07"><h2>Jake "The Service Worker" Archibald</h2><a href="https://jakearchibald.com/"> <img src="img/jake.jpg"></a><ul class="fr">     <li> Introduced the concept in 2013</li><li>                       <a href="https://www.youtube.com/results?search_query=jake+archibald+service+worker"> <img src="img/PWDS.jpg"><img src="img/io16-logo.jpg"><img src="img/CHDS.png"></a></li><li> <a href="https://jakearchibald.github.io/isserviceworkerready/">is Service Worker Ready</a></li></ul></section><section id="pwa08"><h2>App shell</h2><p class="just">An application shell (or app shell) architecture is one way to build a Progressive Web App that reliably and instantly loads on your users' screens, similar to what you see in native applications.</p><p class="just">The app "shell" is the minimal HTML, CSS and JavaScript required to power the user interface and when cached offline can ensure instant, reliably good performance to users on repeat visits. This means the application shell is not loaded from the network every time the user visits. Only the necessary content is needed from the network.</p><span class="small"><a href="https://developers.google.com/web/fundamentals/architecture/app-shell">Developers Google     </a></span></section><section id="pwa09"><h2>manifest.json</h2><pre><code class="json small"> {
"short_name": "AirHorner",
"name": "Kinlan's AirHorner of Infamy",
"icons": [
    {
   "src": "launcher-icon-1x.png",
   "type": "image/png",
   "sizes": "48x48"
   },                        
   {
   "src": "launcher-icon-4x.png",
   "type": "image/png",
   "sizes": "192x192"
   }
   ],
"start_url": "index.html?launcher=true"
}             </code></pre></section><section id="pwa10"><h2>Long Story Short<h3>Progressive Web Apps are</h3><ul><li class="fragment">websites / webapps</li><li class="fragment">with some new features </li><li class="fragment">with App like use and feel</li><li class="fragment">framework agnostic</li></ul></h2></section><section id="pwa11"><h2>Example</h2><img src="img/pwagif.gif" height="450px"><p class="quote">taken from  <a href="https://developer.mozilla.org/en-US/Apps/Progressive">gossiplus.com    </a></p></section></section><section><section id="navigator"><h2>Online or offline</h2><p class="fragment">navigator.onLine</p><p class="fragment">"false" - which means no connection</p><p class="fragment">"true" - which means don't know... </p></section><section id="static01"><h2>App shell</h2><ul><li class="fragment">HTML, CSS</li><li class="fragment">JS library and application files</li><li class="fragment">Images and other graphics</li></ul></section><section id="static02"><h2>App cache</h2><pre>CACHE MANIFEST
# 2012-02-21 v1.0.0
/theme.css
/logo.gif
/main.js
NETWORK:
login.asp
FALLBACK:
/html/ /offline.html</pre><p class="quote">     taken from  <a href="https://www.w3schools.com/html/html5_app_cache.asp">w3schools</a></p></section><section id="static03"><img src="img/CanIUseAppcache.jpg"><p class="quote"><a href="http://caniuse.com/#search=app%20cache"> Can I use</a></p></section><section id="static04"><h2>App cache cons</h2><ul><li>Deprecated -> Removed From Web Standard</li><li>Declarative, no detailed control</li><li>Seciurity flaws</li></ul></section><section id="static05"><h2>What if we could</h2><div class="fragment"><pre><code class="JavaScript"> var filesToCache = [
'/',
'/index.html',
'/scripts/app.js',
'/styles/inline.css',
'/images/clear.png',
'/images/cloudy-scatt.png'
] ; </code></pre></div><div class="fragment"><pre><code class="JavaScript"> caches.open("MyCache").then(function(cache) {
    return cache.addAll(filesToCache);
  })</code></pre></div></section><section id="static06"><pre><code class="JavaScript"> this.addEventListener('fetch', function(e) {
  ...
 </code></pre><div class="fragment"><pre><code class="JavaScript"> e.respondWith(
   caches.match(e.request).then(function(response) {
     return response;
   })
);</code></pre><pre><code class="JavaScript">  
  ...
})</code></pre></div></section><section id="static07"><h2>Yes we can</h2><p>Service Worker Cache API</p></section></section><section><section id="cahce01"><h2>Service Worker Cache API</h2><p class="fragment">Static files</p><p class="fragment">REST calls and dynamic data</p><p class="fragment warn">Can we relay on cached dynamic data??</p></section><section id="CF01"><h2>Cache First</h2><img src="img/schemas/step1.png"></section><section id="CF02"><h2>Cache First</h2><img src="img/schemas/CHstep2.png"></section><section id="CF03"><h2>Cache First</h2><img src="img/schemas/CHstep3.png"></section><section id="CF04"><h2>Cache First</h2><img src="img/schemas/CHstep4.png"></section><section id="CF05"><h2>Cache First</h2><img src="img/schemas/CHstep5.png"></section><section id="NF01"><h2>Network First</h2><img src="img/schemas/step1.png"></section><section id="NF02"><h2>Network First</h2><img src="img/schemas/NFstep2.png"></section><section id="NF03"><h2>Network First</h2><img src="img/schemas/NFstep3.png"></section><section id="NF04"><h2>Network First</h2><img src="img/schemas/NFstep4.png"></section><section id="NF05"><h2>Network First</h2><img src="img/schemas/NFstep5.png"></section><section id="JN01"><h2>Just Network</h2><img src="img/schemas/JN01.png"></section><section id="JC02"><h2>Network First</h2><img src="img/schemas/JN02.png"></section><section id="JC01"><h2>Just Cache</h2><img src="img/schemas/JC01.png"></section><section id="JC01"><h2>Just Cache</h2><img src="img/schemas/JC02.png"></section><section id="race"><h2>Race</h2><img src="img/schemas/race.png"></section></section><section><section id="data01"><h2>Now lets talk about...</h2><h2 class="fragment">... data storage</h2></section><section id="data02"><h2>Cookies</h2><ul><li class="fragment">Widely supported</li><li class="fragment"> Synchronous</li><li class="fragment"> Size limit: 4KB</li><li class="fragment"> Strings only</li><li class="fragment"> lives in window object -> inaccessible for service worker</li><li class="fragment"> Cleared very often   </li></ul></section><section id="data03"><h2>HTML5 Storage    </h2><p>Local/Session storage</p><ul><li class="fragment">Widely supported</li><li class="fragment"> Synchronous</li><li class="fragment"> Size limit : 2,5 ~5 MB</li><li class="fragment"> Strings only</li><li class="fragment"> Unstructured data      </li><li class="fragment"> lives in window object -> inaccessible for service worker</li></ul></section><section id="data04"><h2>WebSQL    </h2><ul>       <li class="fragment"> Asynchronous</li><li class="fragment"> Size limit : 2,5 ~5 MB</li><li class="fragment"> Strings only</li><li class="fragment"> Pre defined schema  </li><li class="fragment"> Quick search</li><li class="fragment red">Deprecated    </li></ul></section><section id="data05"><h2>IndexedDB    </h2><ul><li class="fragment"> Asynchronous (event-based)</li><li class="fragment"> Size limit : 10~20% of avaiable space</li><li class="fragment"> Supported by Service Workers</li><li class="fragment"> Complex Data Objects, Indexes, transactions, cursors            </li><li class="fragment">"Worst API ever design in a history of computer science"            
Jake Archibald at <a href="https://youtu.be/cmGr0RszHc8?t=1924"> Building offline-first PWA - Google I/O 2016</a></li><li class="fragment">Promise based wrappers localForage, idb, PouchDB </li></ul></section><section id="data06"><h2>File system /File API.</h2><ul><li>not yet widely supported</li><li>specification in progress</li><li> <a href="http://w3c.github.io/FileAPI">File Api specfication</a></li></ul></section></section><section id="demo"><h2>Demo </h2></section><section id="missed"><h2>Things I havne't mentioned</h2><ul><li class="fragment">Service worker lifecycle and install process</li><li class="fragment">Service worker works only on HTTPS connection</li><li class="fragment">IndexedDB </li><li class="fragment"> Toolkit for Service Worker</li></ul></section><section id="qa">      <h2><pre><code class="JavaScript"> 
 
 alert("Q & A Time");


</code></pre></h2></section><section><section id="thanks"><h2>Thanks for you attention    </h2><img src="img/theend.png"></section></section></div></div><script src="lib/js/head.min.js"></script><script src="lib/js/reveal.js"></script><script>Reveal.initialize({
  controls: true,
  progress: true,
  history: true,
  center: true,
  rollingLinks: true,
  transition: "convex",
  //- width: "90%",
  //- height: 1.0,
  dependencies: [
    // Syntax highlight for <code> elements
    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },       
  ]
});</script></body></html>